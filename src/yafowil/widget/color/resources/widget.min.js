!function(e,t,i){"use strict";class s{static initialize(e){t("input.color-picker",e).each((function(){new s(t(this)),t(this).attr("spellcheck","false")}))}constructor(e){this.picker=null,this.picker_elem=null,this.elem=e;let s=this.color_elem=t('<span class="color-picker-color" />');e.after(s),this.color="#fff",this.color_swatches=[];let o=this.picker_elem=t('<div class="color-picker-wrapper" />');this.color_elem.after(o);let l=this.close_btn=t('<button class="close-button">âœ•</button>');this.picker_elem.append(l),this.picker=new i.ColorPicker(o.get(0),{color:this.color}),this.elem.val(this.color),this.color_elem.css("background",this.color);let c=this.recent_colors_container=t('<div class="color-picker-recent" />');this.picker_elem.append(c),this.trigger_handle=this.trigger_handle.bind(this),e.on("focus",this.trigger_handle),s.on("mousedown",this.trigger_handle),this.picker.on("color:change",this.update_color.bind(this)),this.close_btn.off("click").on("click",(e=>{e.preventDefault(),this.picker_elem.hide()})),this.handle_events=this.handle_events.bind(this),t(window).off("mousedown keyup",this.handle_events).on("mousedown keyup",this.handle_events)}update_color(){let e=this.picker.color.hexString;this.color_elem.css("background",e),this.elem.val(e)}trigger_handle(e){e.preventDefault(),"none"===this.picker_elem.css("display")?this.picker_elem.show():this.picker_elem.hide(),console.log(this.color_swatches)}create_swatch(e,i){let s=t(`\n            <div class="color-swatch" id="${i}" style="background:${i}"/>\n        `);this.color_swatches.length>=12&&(this.color_swatches.shift(),t("div.color-swatch")[0].remove()),this.recent_colors_container.append(s),this.color_swatches.push(i),s.on("click",(()=>{console.log(i),this.color=i,this.picker.color.hsl=e}))}handle_events(e){if("keyup"!=e.type||"Enter"!=e.key&&"Escape"!=e.key){let t=this.picker_elem;t.is(e.target)||0!==t.has(e.target).length||this.color_elem.is(e.target)||"block"!==t.css("display")||this.picker_elem.hide()}else e.preventDefault(),this.picker_elem.hide(),this.elem.blur(),this.color=this.picker.color.hexString,this.hsl=this.picker.color.hsl,this.recent_colors_container.show(),this.create_swatch(this.hsl,this.color)}}t((function(){void 0!==window.ts?ts.ajax.register(s.initialize,!0):s.initialize()})),e.ColorWidget=s,Object.defineProperty(e,"__esModule",{value:!0}),void 0===window.yafowil&&(window.yafowil={}),window.yafowil.color=e}({},jQuery,iro);
//# sourceMappingURL=widget.min.js.map
