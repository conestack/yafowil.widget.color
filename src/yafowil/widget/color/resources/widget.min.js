!function(e,i,t){"use strict";class s{static initialize(e){i("input.color-picker",e).each((function(){new s(i(this))}))}constructor(e){this.picker=null,this.picker_elem=null,this.elem=e,this.elem.attr("spellcheck","false");let s=this.color_elem=i('<span class="color-picker-color" />');e.after(s);let o=this.picker_elem=i('<div class="color-picker-wrapper" />');this.color_elem.after(o);let l=this.close_btn=i('<button class="close-button">âœ•</button>');this.picker_elem.append(l),this.color="#ffffff",this.color_swatches=[],this.picker=new t.ColorPicker(o.get(0),{color:this.color}),this.elem.val(this.color),this.color_elem.css("background",this.color);let c=this.add_color_btn=i('<button class="add_color">+ Add</button>');this.picker_elem.append(c),this.add_color_btn.on("click",this.create_swatch.bind(this));let h=this.recent_colors_container=i('\n            <div class="color-picker-recent"></div>\n        ');this.picker_elem.append(h),this.trigger_handle=this.trigger_handle.bind(this),e.on("focus",this.trigger_handle),s.on("click",this.trigger_handle),this.update_color=this.update_color.bind(this),this.picker.on("color:change",this.update_color),this.hide_elem=this.hide_elem.bind(this),this.close_btn.on("click",this.hide_elem),this.handle_keypress=this.handle_keypress.bind(this),this.handle_click=this.handle_click.bind(this)}update_color(){let e=this.picker.color.hexString;this.color_elem.css("background",e),this.elem.val(e)}trigger_handle(e){e.preventDefault(),"none"===this.picker_elem.css("display")?(this.picker_elem.show(),i(window).on("keydown",this.handle_keypress),i(window).on("mousedown",this.handle_click)):this.hide_elem()}handle_keypress(e){e.preventDefault(),"Enter"==e.key?(this.color=this.picker.color.hexString,this.recent_colors_container.show(),this.hide_elem(),this.create_swatch()):"Escape"==e.key&&this.hide_elem()}handle_click(e){let i=this.picker_elem;i.is(e.target)||0!==i.has(e.target).length||this.color_elem.is(e.target)||"block"!==i.css("display")||this.hide_elem()}hide_elem(e){e&&e.preventDefault(),this.picker_elem.hide(),this.elem.blur(),i(window).off("keydown",this.handle_keypress),i(window).off("mousedown",this.handle_click)}create_swatch(e){e&&(e.preventDefault(),this.recent_colors_container.show());let t=this.picker.color.hsl,s=this.picker.color.hexString,o=i(`\n            <div class="color-swatch" id="${s}" style="background:${s}"/>\n        `);this.color_swatches.length>=12&&(this.color_swatches.shift(),i("div.color-swatch")[0].remove()),this.recent_colors_container.append(o),this.color_swatches.push(s),o.on("click",(()=>{this.color=s,this.picker.color.hsl=t}))}}i((function(){void 0!==window.ts?ts.ajax.register(s.initialize,!0):s.initialize()})),e.ColorWidget=s,Object.defineProperty(e,"__esModule",{value:!0}),void 0===window.yafowil&&(window.yafowil={}),window.yafowil.color=e}({},jQuery,iro);
//# sourceMappingURL=widget.min.js.map
