!function(e,t,i){"use strict";class o{static initialize(e){t("input.color-picker",e).each((function(){new o(t(this)),t(this).attr("spellcheck","false")}))}constructor(e){this.picker=null,this.picker_elem=null,this.elem=e;let o=this.color_elem=t('<span class="color-picker-color" />');e.after(o),this.color="#fff",this.color_swatches=[];let s=this.picker_elem=t('<div class="color-picker-wrapper" />');this.color_elem.after(s);let l=this.close_btn=t('<button class="close-button">âœ•</button>');this.picker_elem.append(l),this.picker=new i.ColorPicker(s.get(0),{color:this.color}),this.elem.val(this.color),this.color_elem.css("background",this.color);let c=this.add_color_btn=t('<button class="add_color">+ Add</button>');this.picker_elem.append(c),this.add_color_btn.on("click",this.create_swatch.bind(this));let r=this.recent_colors_container=t('\n            <div class="color-picker-recent"></div>\n        ');this.picker_elem.append(r),this.trigger_handle=this.trigger_handle.bind(this),e.on("focus",this.trigger_handle),o.on("mousedown",this.trigger_handle),this.picker.on("color:change",this.update_color.bind(this)),this.close_btn.off("click").on("click",(e=>{e.preventDefault(),this.picker_elem.hide()})),this.handle_events=this.handle_events.bind(this),t(window).off("mousedown keyup",this.handle_events).on("mousedown keyup",this.handle_events)}update_color(){let e=this.picker.color.hexString;this.color_elem.css("background",e),this.elem.val(e)}trigger_handle(e){e.preventDefault(),"none"===this.picker_elem.css("display")?this.picker_elem.show():this.picker_elem.hide(),console.log(this.color_swatches)}create_swatch(e){console.log("CLOK"),e&&(e.preventDefault(),this.recent_colors_container.show());let i=this.picker.color.hsl,o=this.picker.color.hexString;console.log(o),console.log(i);let s=t(`\n            <div class="color-swatch" id="${o}" style="background:${o}"/>\n        `);this.color_swatches.length>=12&&(this.color_swatches.shift(),t("div.color-swatch")[0].remove()),this.recent_colors_container.append(s),this.color_swatches.push(o),s.on("click",(()=>{console.log(o),this.color=o,this.picker.color.hsl=i}))}handle_events(e){if("keyup"!=e.type||"Enter"!=e.key&&"Escape"!=e.key){let t=this.picker_elem;t.is(e.target)||0!==t.has(e.target).length||this.color_elem.is(e.target)||"block"!==t.css("display")||this.picker_elem.hide()}else e.preventDefault(),this.picker_elem.hide(),this.elem.blur(),this.color=this.picker.color.hexString,this.recent_colors_container.show(),this.create_swatch()}}t((function(){void 0!==window.ts?ts.ajax.register(o.initialize,!0):o.initialize()})),e.ColorWidget=o,Object.defineProperty(e,"__esModule",{value:!0}),void 0===window.yafowil&&(window.yafowil={}),window.yafowil.color=e}({},jQuery,iro);
//# sourceMappingURL=widget.min.js.map
