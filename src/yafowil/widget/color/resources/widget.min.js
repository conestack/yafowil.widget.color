!function(e,i,t){"use strict";class s{static initialize(e){i("input.color-picker",e).each((function(){new s(i(this)),i(this).attr("spellcheck","false")}))}constructor(e){this.picker=null,this.picker_elem=null,this.elem=e;let s=this.color_elem=i('<span class="color-picker-color" />');e.after(s),this.color="#fff";let l=this.picker_elem=i('<div class="color-picker-wrapper" />');this.color_elem.after(l);let o=this.close_btn=i('<button class="close-button">âœ•</button>');this.picker_elem.append(o),this.picker=new t.ColorPicker(l.get(0),{color:this.color}),this.elem.val(this.color),this.color_elem.css("background",this.color),this.trigger_handle=this.trigger_handle.bind(this),e.on("focus",this.trigger_handle),s.on("mousedown",this.trigger_handle),this.picker.on("color:change",this.update_color.bind(this)),this.close_btn.off("click").on("click",(e=>{e.preventDefault(),this.picker_elem.hide()})),this.handle_events=this.handle_events.bind(this),i(window).off("mousedown keyup",this.handle_events).on("mousedown keyup",this.handle_events)}update_color(){let e=this.picker.color.hexString;this.color_elem.css("background",e),this.elem.val(e)}trigger_handle(e){e.preventDefault(),"none"===this.picker_elem.css("display")?this.picker_elem.show():this.picker_elem.hide()}handle_events(e){if("keyup"!=e.type||"Enter"!=e.key&&"Escape"!=e.key){let i=this.picker_elem;i.is(e.target)||0!==i.has(e.target).length||this.color_elem.is(e.target)||"block"!==i.css("display")||this.picker_elem.hide()}else e.preventDefault(),this.picker_elem.hide(),this.color=this.picker.color.hexString}}i((function(){void 0!==window.ts?ts.ajax.register(s.initialize,!0):s.initialize()})),e.ColorWidget=s,Object.defineProperty(e,"__esModule",{value:!0}),void 0===window.yafowil&&(window.yafowil={}),window.yafowil.color=e}({},jQuery,iro);
//# sourceMappingURL=widget.min.js.map
